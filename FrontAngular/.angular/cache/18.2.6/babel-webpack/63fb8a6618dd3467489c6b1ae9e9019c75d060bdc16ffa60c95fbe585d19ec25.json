{"ast":null,"code":"import { MatDialog } from '@angular/material/dialog';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { CategoriaService } from '../../../services/categoria.service';\nimport { CategoriaEditComponent } from '../categoria-edit/categoria-edit.component';\nimport { CategoriaDetailComponent } from '../categoria-detail/categoria-detail.component';\nimport { CategoriaDeleteComponent } from '../categoria-delete/categoria-delete.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/categoria.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/material/snack-bar\";\nexport let CategoriaListComponent = /*#__PURE__*/(() => {\n  class CategoriaListComponent {\n    constructor(categoriaService, dialog, snackBar) {\n      this.categoriaService = categoriaService;\n      this.dialog = dialog;\n      this.snackBar = snackBar;\n      this.displayedColumns = ['categoriaID', 'nome', 'descricao', 'acoes'];\n      this.isLoading = true;\n      this.error = null;\n      this.dataSource = new MatTableDataSource();\n    }\n    ngOnInit() {\n      this.loadCategorias();\n    }\n    loadCategorias() {\n      this.isLoading = true;\n      this.categoriaService.getCategorias().subscribe({\n        next: categorias => {\n          this.dataSource.data = categorias;\n          this.dataSource.paginator = this.paginator;\n          this.dataSource.sort = this.sort;\n          this.isLoading = false;\n        },\n        error: error => {\n          this.error = error.message;\n          this.isLoading = false;\n          this.showMessage('Erro ao carregar categorias', true);\n        }\n      });\n    }\n    applyFilter(event) {\n      const filterValue = event.target.value;\n      this.dataSource.filter = filterValue.trim().toLowerCase();\n    }\n    openCreateDialog() {\n      const dialogRef = this.dialog.open(CategoriaCreateComponent, {\n        width: '600px'\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          this.loadCategorias();\n          this.showMessage('Categoria criada com sucesso');\n        }\n      });\n    }\n    openEditDialog(categoria) {\n      const dialogRef = this.dialog.open(CategoriaEditComponent, {\n        width: '600px',\n        data: categoria\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          this.loadCategorias();\n          this.showMessage('Categoria atualizada com sucesso');\n        }\n      });\n    }\n    openDetailsDialog(categoria) {\n      this.dialog.open(CategoriaDetailComponent, {\n        width: '600px',\n        data: categoria\n      });\n    }\n    openDeleteDialog(categoria) {\n      const dialogRef = this.dialog.open(CategoriaDeleteComponent, {\n        width: '400px',\n        data: categoria\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          this.loadCategorias();\n          this.showMessage('Categoria excluída com sucesso');\n        }\n      });\n    }\n    showMessage(message, isError = false) {\n      this.snackBar.open(message, 'Fechar', {\n        duration: 5000,\n        panelClass: isError ? ['error-snackbar'] : ['success-snackbar'],\n        horizontalPosition: 'end',\n        verticalPosition: 'top'\n      });\n    }\n    static {\n      this.ɵfac = function CategoriaListComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CategoriaListComponent)(i0.ɵɵdirectiveInject(i1.CategoriaService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CategoriaListComponent,\n        selectors: [[\"app-categoria-list\"]],\n        viewQuery: function CategoriaListComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(MatPaginator, 5);\n            i0.ɵɵviewQuery(MatSort, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n          }\n        },\n        decls: 2,\n        vars: 0,\n        template: function CategoriaListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"p\");\n            i0.ɵɵtext(1, \"categoria-list works!\");\n            i0.ɵɵelementEnd();\n          }\n        }\n      });\n    }\n  }\n  return CategoriaListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}