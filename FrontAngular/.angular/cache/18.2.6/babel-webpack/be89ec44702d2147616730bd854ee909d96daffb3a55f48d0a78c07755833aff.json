{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/datepicker\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/button-toggle\";\nfunction TransacaoFilterComponent_mat_form_field_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-form-field\", 11)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Selecione o M\\u00EAs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 12)(4, \"mat-datepicker-toggle\", 13);\n    i0.ɵɵelementStart(5, \"mat-datepicker\", 14, 0);\n    i0.ɵɵlistener(\"monthSelected\", function TransacaoFilterComponent_mat_form_field_8_Template_mat_datepicker_monthSelected_5_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const monthPicker_r2 = i0.ɵɵreference(6);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.setMonthAndYear($event, monthPicker_r2));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const monthPicker_r2 = i0.ɵɵreference(6);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"matDatepicker\", monthPicker_r2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", monthPicker_r2);\n  }\n}\nfunction TransacaoFilterComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"mat-form-field\", 11)(2, \"mat-label\");\n    i0.ɵɵtext(3, \"Data In\\u00EDcio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 15)(5, \"mat-datepicker-toggle\", 13)(6, \"mat-datepicker\", null, 1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"mat-form-field\", 11)(9, \"mat-label\");\n    i0.ɵɵtext(10, \"Data Fim\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 16)(12, \"mat-datepicker-toggle\", 13)(13, \"mat-datepicker\", null, 2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function TransacaoFilterComponent_ng_container_9_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.aplicarFiltro());\n    });\n    i0.ɵɵelementStart(16, \"mat-icon\");\n    i0.ɵɵtext(17, \"filter_list\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \" Aplicar \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const startPicker_r5 = i0.ɵɵreference(7);\n    const endPicker_r6 = i0.ɵɵreference(14);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"matDatepicker\", startPicker_r5)(\"max\", ctx_r2.maxDate);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", startPicker_r5);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"matDatepicker\", endPicker_r6)(\"max\", ctx_r2.maxDate);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", endPicker_r6);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", !ctx_r2.isPeriodoValido());\n  }\n}\nexport let TransacaoFilterComponent = /*#__PURE__*/(() => {\n  class TransacaoFilterComponent {\n    constructor(fb) {\n      this.fb = fb;\n      this.filtroChange = new EventEmitter();\n      this.maxDate = new Date();\n      this.destroy$ = new Subject();\n      this.initializeForm();\n    }\n    ngOnInit() {\n      this.setupFormSubscription();\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    initializeForm() {\n      this.filterForm = this.fb.group({\n        tipoFiltro: ['mes'],\n        mesAno: [new Date()],\n        dataInicio: [null],\n        dataFim: [null]\n      });\n    }\n    setupFormSubscription() {\n      this.filterForm.get('tipoFiltro')?.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(() => {\n        this.filterForm.patchValue({\n          mesAno: new Date(),\n          dataInicio: null,\n          dataFim: null\n        });\n        this.aplicarFiltro();\n      });\n    }\n    setMonthAndYear(date, datepicker) {\n      const ctrlValue = this.filterForm.get('mesAno')?.value;\n      const ctrlDate = new Date(ctrlValue);\n      ctrlDate.setMonth(date.getMonth());\n      ctrlDate.setFullYear(date.getFullYear());\n      this.filterForm.get('mesAno')?.setValue(ctrlDate);\n      datepicker.close();\n      this.aplicarFiltro();\n    }\n    aplicarFiltro() {\n      if (!this.filterForm.valid) return;\n      this.filtroChange.emit(this.filterForm.value);\n    }\n    limparFiltro() {\n      this.filterForm.patchValue({\n        tipoFiltro: 'mes',\n        mesAno: new Date(),\n        dataInicio: null,\n        dataFim: null\n      });\n      this.aplicarFiltro();\n    }\n    isPeriodoValido() {\n      const inicio = this.filterForm.get('dataInicio')?.value;\n      const fim = this.filterForm.get('dataFim')?.value;\n      return inicio && fim && inicio <= fim;\n    }\n    static {\n      this.ɵfac = function TransacaoFilterComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || TransacaoFilterComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: TransacaoFilterComponent,\n        selectors: [[\"app-transacao-filter\"]],\n        outputs: {\n          filtroChange: \"filtroChange\"\n        },\n        decls: 14,\n        vars: 3,\n        consts: [[\"monthPicker\", \"\"], [\"startPicker\", \"\"], [\"endPicker\", \"\"], [1, \"filter-card\"], [1, \"filter-form\", 3, \"formGroup\"], [\"formControlName\", \"tipoFiltro\", 1, \"filter-type-group\"], [\"value\", \"mes\"], [\"value\", \"periodo\"], [\"appearance\", \"outline\", 4, \"ngIf\"], [4, \"ngIf\"], [\"mat-button\", \"\", 3, \"click\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"formControlName\", \"mesAno\", \"readonly\", \"\", 3, \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"startView\", \"year\", \"panelClass\", \"month-picker\", 3, \"monthSelected\"], [\"matInput\", \"\", \"formControlName\", \"dataInicio\", 3, \"matDatepicker\", \"max\"], [\"matInput\", \"\", \"formControlName\", \"dataFim\", 3, \"matDatepicker\", \"max\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", \"disabled\"]],\n        template: function TransacaoFilterComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"mat-card\", 3)(1, \"mat-card-content\")(2, \"form\", 4)(3, \"mat-button-toggle-group\", 5)(4, \"mat-button-toggle\", 6);\n            i0.ɵɵtext(5, \"M\\u00EAs Espec\\u00EDfico\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"mat-button-toggle\", 7);\n            i0.ɵɵtext(7, \"Per\\u00EDodo\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(8, TransacaoFilterComponent_mat_form_field_8_Template, 7, 2, \"mat-form-field\", 8)(9, TransacaoFilterComponent_ng_container_9_Template, 19, 7, \"ng-container\", 9);\n            i0.ɵɵelementStart(10, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function TransacaoFilterComponent_Template_button_click_10_listener() {\n              return ctx.limparFiltro();\n            });\n            i0.ɵɵelementStart(11, \"mat-icon\");\n            i0.ɵɵtext(12, \"clear\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(13, \" Limpar \");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            let tmp_1_0;\n            let tmp_2_0;\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"formGroup\", ctx.filterForm);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.filterForm.get(\"tipoFiltro\")) == null ? null : tmp_1_0.value) === \"mes\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.filterForm.get(\"tipoFiltro\")) == null ? null : tmp_2_0.value) === \"periodo\");\n          }\n        },\n        dependencies: [i2.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.MatCard, i3.MatCardContent, i4.MatFormField, i4.MatLabel, i4.MatSuffix, i5.MatInput, i6.MatButton, i7.MatDatepicker, i7.MatDatepickerInput, i7.MatDatepickerToggle, i8.MatIcon, i9.MatButtonToggleGroup, i9.MatButtonToggle],\n        styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap \\\"use strict\\\";})()[_ngcontent-%COMP%] ;{%BLOCK%}\"]\n      });\n    }\n  }\n  return TransacaoFilterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}