{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/material/button-toggle\";\nimport * as i5 from \"@angular/material/datepicker\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/icon\";\nfunction TransacaoFiltroComponent_ng_container_14_mat_error_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Selecione um m\\u00EAs \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TransacaoFiltroComponent_ng_container_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"mat-form-field\", 10)(2, \"mat-label\");\n    i0.ɵɵtext(3, \"Selecione o M\\u00EAs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 11);\n    i0.ɵɵlistener(\"click\", function TransacaoFiltroComponent_ng_container_14_Template_input_click_4_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const monthPicker_r2 = i0.ɵɵreference(7);\n      return i0.ɵɵresetView(monthPicker_r2.open());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"mat-datepicker-toggle\", 12);\n    i0.ɵɵelementStart(6, \"mat-datepicker\", 13, 0);\n    i0.ɵɵlistener(\"monthSelected\", function TransacaoFiltroComponent_ng_container_14_Template_mat_datepicker_monthSelected_6_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const monthPicker_r2 = i0.ɵɵreference(7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.setMonthAndYear($event, monthPicker_r2));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, TransacaoFiltroComponent_ng_container_14_mat_error_8_Template, 2, 0, \"mat-error\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    let tmp_4_0;\n    const monthPicker_r2 = i0.ɵɵreference(7);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"matDatepicker\", monthPicker_r2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", monthPicker_r2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (tmp_4_0 = ctx_r2.filterForm.get(\"mesAno\")) == null ? null : tmp_4_0.errors == null ? null : tmp_4_0.errors[\"required\"]);\n  }\n}\nfunction TransacaoFiltroComponent_ng_container_15_mat_error_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Data inicial obrigat\\u00F3ria \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TransacaoFiltroComponent_ng_container_15_mat_error_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Data final obrigat\\u00F3ria \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TransacaoFiltroComponent_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 14)(2, \"mat-form-field\", 10)(3, \"mat-label\");\n    i0.ɵɵtext(4, \"Data In\\u00EDcio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 15)(6, \"mat-datepicker-toggle\", 12)(7, \"mat-datepicker\", null, 1);\n    i0.ɵɵtemplate(9, TransacaoFiltroComponent_ng_container_15_mat_error_9_Template, 2, 0, \"mat-error\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"mat-form-field\", 10)(11, \"mat-label\");\n    i0.ɵɵtext(12, \"Data Fim\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"input\", 16)(14, \"mat-datepicker-toggle\", 12)(15, \"mat-datepicker\", null, 2);\n    i0.ɵɵtemplate(17, TransacaoFiltroComponent_ng_container_15_mat_error_17_Template, 2, 0, \"mat-error\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function TransacaoFiltroComponent_ng_container_15_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.aplicarFiltro());\n    });\n    i0.ɵɵelementStart(19, \"mat-icon\");\n    i0.ɵɵtext(20, \"filter_list\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"span\");\n    i0.ɵɵtext(22, \"Aplicar\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    let tmp_4_0;\n    let tmp_6_0;\n    let tmp_8_0;\n    let tmp_11_0;\n    const startPicker_r5 = i0.ɵɵreference(8);\n    const endPicker_r6 = i0.ɵɵreference(16);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"matDatepicker\", startPicker_r5)(\"max\", ((tmp_4_0 = ctx_r2.filterForm.get(\"dataFim\")) == null ? null : tmp_4_0.value) || ctx_r2.maxDate);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", startPicker_r5);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (tmp_6_0 = ctx_r2.filterForm.get(\"dataInicio\")) == null ? null : tmp_6_0.errors == null ? null : tmp_6_0.errors[\"required\"]);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"matDatepicker\", endPicker_r6)(\"min\", (tmp_8_0 = ctx_r2.filterForm.get(\"dataInicio\")) == null ? null : tmp_8_0.value)(\"max\", ctx_r2.maxDate);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", endPicker_r6);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (tmp_11_0 = ctx_r2.filterForm.get(\"dataFim\")) == null ? null : tmp_11_0.errors == null ? null : tmp_11_0.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r2.isPeriodoValido() || ctx_r2.filterForm.invalid);\n  }\n}\nexport let TransacaoFiltroComponent = /*#__PURE__*/(() => {\n  class TransacaoFiltroComponent {\n    constructor(fb) {\n      this.fb = fb;\n      this.filtroAplicado = new EventEmitter();\n      this.recarregar = new EventEmitter();\n      this.maxDate = new Date();\n      this.destroy$ = new Subject();\n    }\n    ngOnInit() {\n      this.initializeForm();\n      this.setupFormSubscription();\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    initializeForm() {\n      this.filterForm = this.fb.group({\n        tipoFiltro: ['mes'],\n        mesAno: [new Date(), Validators.required],\n        dataInicio: [null],\n        dataFim: [null]\n      });\n      // Aplicar validadores condicionalmente\n      this.filterForm.get('tipoFiltro')?.valueChanges.subscribe(tipo => {\n        const dataInicioControl = this.filterForm.get('dataInicio');\n        const dataFimControl = this.filterForm.get('dataFim');\n        const mesAnoControl = this.filterForm.get('mesAno');\n        if (tipo === 'periodo') {\n          dataInicioControl?.setValidators([Validators.required]);\n          dataFimControl?.setValidators([Validators.required]);\n          mesAnoControl?.clearValidators();\n        } else {\n          dataInicioControl?.clearValidators();\n          dataFimControl?.clearValidators();\n          mesAnoControl?.setValidators([Validators.required]);\n        }\n        dataInicioControl?.updateValueAndValidity();\n        dataFimControl?.updateValueAndValidity();\n        mesAnoControl?.updateValueAndValidity();\n      });\n    }\n    setupFormSubscription() {\n      this.filterForm.get('tipoFiltro')?.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(() => {\n        this.resetarFiltros();\n      });\n    }\n    resetarFiltros() {\n      const tipoFiltro = this.filterForm.get('tipoFiltro')?.value;\n      this.filterForm.patchValue({\n        mesAno: tipoFiltro === 'mes' ? new Date() : null,\n        dataInicio: null,\n        dataFim: null\n      });\n    }\n    setMonthAndYear(date, datepicker) {\n      const ctrlValue = this.filterForm.get('mesAno')?.value;\n      const ctrlDate = new Date(ctrlValue || date);\n      ctrlDate.setMonth(date.getMonth());\n      ctrlDate.setFullYear(date.getFullYear());\n      this.filterForm.get('mesAno')?.setValue(ctrlDate);\n      datepicker.close();\n      this.aplicarFiltro();\n    }\n    aplicarFiltro() {\n      if (this.filterForm.invalid) return;\n      const formValue = this.filterForm.value;\n      const filtro = {\n        tipoFiltro: formValue.tipoFiltro,\n        mesAno: formValue.tipoFiltro === 'mes' ? formValue.mesAno : undefined,\n        dataInicio: formValue.tipoFiltro === 'periodo' ? formValue.dataInicio : undefined,\n        dataFim: formValue.tipoFiltro === 'periodo' ? formValue.dataFim : undefined\n      };\n      this.filtroAplicado.emit(filtro);\n    }\n    limparFiltro() {\n      this.filterForm.reset({\n        tipoFiltro: 'mes',\n        mesAno: new Date(),\n        dataInicio: null,\n        dataFim: null\n      });\n      this.aplicarFiltro();\n      this.recarregar.emit();\n    }\n    isPeriodoValido() {\n      if (this.filterForm.get('tipoFiltro')?.value !== 'periodo') return true;\n      const inicio = this.filterForm.get('dataInicio')?.value;\n      const fim = this.filterForm.get('dataFim')?.value;\n      return inicio && fim && inicio <= fim;\n    }\n    formatarData(data) {\n      if (!data) return '';\n      return new Date(data).toLocaleDateString('pt-BR');\n    }\n    getMesAtual() {\n      const mesAno = this.filterForm.get('mesAno')?.value;\n      if (!mesAno) return '';\n      return new Date(mesAno).toLocaleDateString('pt-BR', {\n        month: 'long',\n        year: 'numeric'\n      });\n    }\n    static {\n      this.ɵfac = function TransacaoFiltroComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || TransacaoFiltroComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: TransacaoFiltroComponent,\n        selectors: [[\"app-transacao-filtro\"]],\n        outputs: {\n          filtroAplicado: \"filtroAplicado\",\n          recarregar: \"recarregar\"\n        },\n        decls: 21,\n        vars: 3,\n        consts: [[\"monthPicker\", \"\"], [\"startPicker\", \"\"], [\"endPicker\", \"\"], [1, \"filter-card\"], [1, \"filter-form\", 3, \"formGroup\"], [\"formControlName\", \"tipoFiltro\", 1, \"filter-type-group\"], [\"value\", \"mes\"], [\"value\", \"periodo\"], [4, \"ngIf\"], [\"mat-button\", \"\", 1, \"clear-button\", 3, \"click\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"formControlName\", \"mesAno\", \"readonly\", \"\", \"placeholder\", \"MM/YYYY\", 3, \"click\", \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"startView\", \"year\", 3, \"monthSelected\"], [1, \"periodo-container\"], [\"matInput\", \"\", \"formControlName\", \"dataInicio\", \"placeholder\", \"DD/MM/YYYY\", 3, \"matDatepicker\", \"max\"], [\"matInput\", \"\", \"formControlName\", \"dataFim\", \"placeholder\", \"DD/MM/YYYY\", 3, \"matDatepicker\", \"min\", \"max\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"action-button\", 3, \"click\", \"disabled\"]],\n        template: function TransacaoFiltroComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"mat-card\", 3)(1, \"mat-card-content\")(2, \"form\", 4)(3, \"mat-button-toggle-group\", 5)(4, \"mat-button-toggle\", 6)(5, \"mat-icon\");\n            i0.ɵɵtext(6, \"calendar_today\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"span\");\n            i0.ɵɵtext(8, \"M\\u00EAs Espec\\u00EDfico\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"mat-button-toggle\", 7)(10, \"mat-icon\");\n            i0.ɵɵtext(11, \"date_range\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"span\");\n            i0.ɵɵtext(13, \"Per\\u00EDodo\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(14, TransacaoFiltroComponent_ng_container_14_Template, 9, 3, \"ng-container\", 8)(15, TransacaoFiltroComponent_ng_container_15_Template, 23, 10, \"ng-container\", 8);\n            i0.ɵɵelementStart(16, \"button\", 9);\n            i0.ɵɵlistener(\"click\", function TransacaoFiltroComponent_Template_button_click_16_listener() {\n              return ctx.limparFiltro();\n            });\n            i0.ɵɵelementStart(17, \"mat-icon\");\n            i0.ɵɵtext(18, \"clear\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"span\");\n            i0.ɵɵtext(20, \"Limpar\");\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            let tmp_1_0;\n            let tmp_2_0;\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"formGroup\", ctx.filterForm);\n            i0.ɵɵadvance(12);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.filterForm.get(\"tipoFiltro\")) == null ? null : tmp_1_0.value) === \"mes\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.filterForm.get(\"tipoFiltro\")) == null ? null : tmp_2_0.value) === \"periodo\");\n          }\n        },\n        dependencies: [i2.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.MatCard, i3.MatCardContent, i4.MatButtonToggleGroup, i4.MatButtonToggle, i5.MatDatepicker, i5.MatDatepickerInput, i5.MatDatepickerToggle, i6.MatFormField, i6.MatLabel, i6.MatError, i6.MatSuffix, i7.MatInput, i8.MatButton, i9.MatIcon],\n        styles: [\".filter-card[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:12px;background-color:#fff;box-shadow:0 2px 4px #0000001a;transition:box-shadow .3s ease}.filter-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001a}.filter-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px}.filter-form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;align-items:center}.filter-form[_ngcontent-%COMP%]   .filter-type-group[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:8px;margin-right:16px}.filter-form[_ngcontent-%COMP%]   .filter-type-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{padding:4px 12px}.filter-form[_ngcontent-%COMP%]   .filter-type-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px;vertical-align:middle}.filter-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:auto;min-width:200px;margin-bottom:-1.25em}.filter-form[_ngcontent-%COMP%]   mat-form-field.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{margin:0}.filter-form[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{height:36px;margin-top:3px;padding:0 16px}.filter-form[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.filter-form[_ngcontent-%COMP%]   .action-button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.filter-form[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]{height:36px;margin-top:3px}.filter-form[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.filter-form[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]:hover{background-color:#0000000a}[_nghost-%COMP%]     .month-picker .mat-calendar-period-button{pointer-events:none}[_nghost-%COMP%]     .month-picker .mat-calendar-arrow{display:none}[_nghost-%COMP%]     .month-picker .mat-calendar-table{height:auto}[_nghost-%COMP%]     .mat-button-toggle-checked{background-color:#3498db!important;color:#fff!important}[_nghost-%COMP%]     .mat-button-toggle-checked mat-icon{color:#fff!important}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-outline{background-color:#fff}.periodo-container[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.periodo-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:200px}@media (max-width: 600px){.periodo-container[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.periodo-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.filter-form[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-form[_ngcontent-%COMP%]   .filter-type-group[_ngcontent-%COMP%]{width:100%;margin-right:0;margin-bottom:16px}.filter-form[_ngcontent-%COMP%]   .filter-type-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{flex:1;text-align:center}.filter-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.filter-form[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%], .filter-form[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]{width:100%;margin-top:8px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.filter-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}\"]\n      });\n    }\n  }\n  return TransacaoFiltroComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}